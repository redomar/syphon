# =============================================================================
# SYPHON APPLICATION ENVIRONMENT CONFIGURATION
# =============================================================================
# Copy this file to .env and update values for your environment
# All ports default to 808x range for shared server compatibility

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================
NODE_ENV=production
VERSION=0.3.0
BRANCH=main

# =============================================================================
# PORT CONFIGURATION
# =============================================================================
# NOTE: Development/staging uses standard ports (3001, 16686, 9090)
# Production/master branch should use 808x range for shared servers

# Main application port (internal container port)
PORT=3001

# External application port (what you access from outside)
# Development: 3001
# Production: 8087 (for shared servers)
APP_PORT=8087

# Jaeger Telemetry Ports
# Development: 16686, 14268, 4317, 4318
# Production: 808x range for shared servers
JAEGER_UI_PORT=8085              # Jaeger Web UI
JAEGER_THRIFT_PORT=8088          # HTTP Thrift receiver
JAEGER_OTLP_GRPC_PORT=8089       # OTLP gRPC receiver
JAEGER_OTLP_HTTP_PORT=8090       # OTLP HTTP receiver

# Prometheus Metrics Port
# Development: 9090
# Production: 8086 (for shared servers)
PROMETHEUS_PORT=8086             # Prometheus Web UI

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# External Neon PostgreSQL Database
DATABASE_URL=postgresql://username:password@host:5432/database_name

# =============================================================================
# AUTHENTICATION - CLERK
# =============================================================================
# Get these from your Clerk Dashboard: https://dashboard.clerk.com/
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_test_your-publishable-key
CLERK_SECRET_KEY=sk_test_your-secret-key

# Optional: Customize redirect URLs after sign in/up
NEXT_PUBLIC_CLERK_AFTER_SIGN_IN_URL=/dashboard
NEXT_PUBLIC_CLERK_AFTER_SIGN_UP_URL=/dashboard

# =============================================================================
# OPENTELEMETRY CONFIGURATION
# =============================================================================
# Service identification
OTEL_SERVICE_NAME=syphon-app
OTEL_SERVICE_VERSION=0.3.0

# Telemetry endpoints (uses internal Docker network by default)
# For external Jaeger instance, change to: http://your-server:your-port
OTEL_EXPORTER_OTLP_ENDPOINT=http://syphon-jaeger:4318
OTEL_EXPORTER_OTLP_TRACES_ENDPOINT=http://syphon-jaeger:4318/v1/traces

# Optional: External service endpoints
# OTEL_EXPORTER_OTLP_ENDPOINT=http://your-external-jaeger:4318
# OTEL_EXPORTER_OTLP_TRACES_ENDPOINT=http://your-external-jaeger:4318/v1/traces

# Performance tuning
OTEL_EXPORTER_OTLP_TIMEOUT=10000
OTEL_EXPORTER_OTLP_COMPRESSION=gzip
OTEL_BSP_MAX_EXPORT_BATCH_SIZE=512
OTEL_BSP_EXPORT_TIMEOUT=30000
OTEL_BSP_SCHEDULE_DELAY=5000

# Resource attributes
OTEL_RESOURCE_ATTRIBUTES=service.name=syphon-app,service.version=0.3.0,deployment.environment=production

# Disable telemetry completely (set to true to disable)
OTEL_SDK_DISABLED=false

# =============================================================================
# NEXT.JS CONFIGURATION
# =============================================================================
# Disable Next.js telemetry (recommended for production)
NEXT_TELEMETRY_DISABLED=1

# Server hostname (usually 0.0.0.0 for containers)
HOSTNAME=0.0.0.0

# =============================================================================
# DOCKER RESOURCE LIMITS
# =============================================================================
# Application resources
APP_MEMORY_LIMIT=1G
APP_CPU_LIMIT=2.0
APP_MEMORY_RESERVATION=512M
APP_CPU_RESERVATION=0.5

# Jaeger resources
JAEGER_MEMORY_LIMIT=512M
JAEGER_CPU_LIMIT=1.0
JAEGER_MEMORY_RESERVATION=256M
JAEGER_CPU_RESERVATION=0.25
JAEGER_MAX_TRACES=50000
JAEGER_COLLECTOR_QUEUE_SIZE=2000
JAEGER_COLLECTOR_WORKERS=50

# Prometheus resources
PROMETHEUS_MEMORY_LIMIT=1G
PROMETHEUS_CPU_LIMIT=1.0
PROMETHEUS_MEMORY_RESERVATION=512M
PROMETHEUS_CPU_RESERVATION=0.25
PROMETHEUS_RETENTION=200h

# =============================================================================
# DOCKER HEALTH CHECK CONFIGURATION
# =============================================================================
# Application health checks
APP_HEALTHCHECK_INTERVAL=30s
APP_HEALTHCHECK_TIMEOUT=10s
APP_HEALTHCHECK_RETRIES=5
APP_HEALTHCHECK_START_PERIOD=60s

# Jaeger health checks
HEALTHCHECK_INTERVAL=20s
HEALTHCHECK_TIMEOUT=5s
HEALTHCHECK_RETRIES=5
HEALTHCHECK_START_PERIOD=30s

# Prometheus health checks
PROMETHEUS_HEALTHCHECK_INTERVAL=30s
PROMETHEUS_HEALTHCHECK_TIMEOUT=10s
PROMETHEUS_HEALTHCHECK_RETRIES=3
PROMETHEUS_HEALTHCHECK_START_PERIOD=40s

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
LOG_MAX_SIZE=10m
LOG_MAX_FILES=3

# =============================================================================
# SERVICE VERSIONS
# =============================================================================
JAEGER_VERSION=latest
PROMETHEUS_VERSION=latest

# =============================================================================
# DEVELOPMENT ONLY SETTINGS
# =============================================================================
# Uncomment for development mode
# NODE_ENV=development
# PORT=3000
# APP_PORT=3000